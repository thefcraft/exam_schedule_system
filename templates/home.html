<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exam Room Navigator</title>
    <meta name="description" content="Find your exam room quickly" />
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body class="light-mode">
    <header>
      <div class="container header-container">
        <div class="logo">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="calendar-icon">
            <rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect>
            <line x1="16" x2="16" y1="2" y2="6"></line>
            <line x1="8" x2="8" y1="2" y2="6"></line>
            <line x1="3" x2="21" y1="10" y2="10"></line>
          </svg>
          <h1 class="app-title">Exam Room Navigator</h1>
        </div>
        <button id="theme-toggle" class="theme-toggle">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sun-icon">
            <circle cx="12" cy="12" r="4"></circle>
            <path d="M12 2v2"></path>
            <path d="M12 20v2"></path>
            <path d="m4.93 4.93 1.41 1.41"></path>
            <path d="m17.66 17.66 1.41 1.41"></path>
            <path d="M2 12h2"></path>
            <path d="M20 12h2"></path>
            <path d="m6.34 17.66-1.41 1.41"></path>
            <path d="m19.07 4.93-1.41 1.41"></path>
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="moon-icon">
            <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
          </svg>
        </button>
      </div>
    </header>
    
    <main>
      <div class="container">
        <div class="heading-section">
          <h1 class="main-heading">College Exam Time Table</h1>
          <p class="subtitle">Find your exam room and schedule quickly. Enter your roll number or course code to get started.</p>
        </div>
        
        <div class="card">
          <div class="card-content">
            <div class="tabs">
              <div class="tabs-list">
                <button class="tab-button active" data-tab="student">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tab-icon">
                    <path d="M22 10v6M2 10l10-5 10 5-10 5z"></path>
                    <path d="M6 12v5c0 2 2 3 6 3s6-1 6-3v-5"></path>
                  </svg>
                  <span class="tab-text">Student Search</span>
                </button>
                <button class="tab-button" data-tab="faculty">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tab-icon">
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                  </svg>
                  <span class="tab-text">Faculty Search</span>
                </button>
              </div>
              
              <div class="tab-content active" id="student-tab">
                <div class="section-info">
                  <h2 class="section-title">Student Section</h2>
                  <p class="section-desc">Dear Student, here is your End-Semester Exam Schedule. Please enter your roll number to view your schedule.</p>
                </div>
                
                <form id="student-form" class="search-form">
                  <div class="input-container">
                    <input type="text" id="student-input" class="search-input" placeholder="Enter Roll Number (e.g., 2302MC05)" />
                  </div>
                  <button type="submit" class="search-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon">
                      <circle cx="11" cy="11" r="8"></circle>
                      <path d="m21 21-4.3-4.3"></path>
                    </svg>
                    <span>Search</span>
                  </button>
                </form>
                
                <div id="student-results" class="results-container" style="display: none;">
                  <div class="results-header">
                    <h3 class="results-title">Your Exam Schedule</h3>
                    <button id="student-download" class="download-button">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="download-icon">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                      </svg>
                      <span><strong>Verify with Excel:</strong> Download file</span>
                    </button>
                  </div>
                  <div class="table-container">
                    <table class="results-table">
                      <!-- <caption>Exam schedule</caption> -->
                      <thead>
                        <tr>
                          <th>Roll No</th>
                          <th>Exam Day</th>
                          <th>Course Code</th>
                          <th>Date</th>
                          <th>Shift</th>
                          <th>Room No</th>
                          <th>Course Name</th>
                        </tr>
                      </thead>
                      <tbody id="student-table-body">
                        <!-- Results will be inserted here by JavaScript -->
                      </tbody>
                    </table>
                  </div>
                </div>
                
                <div id="student-no-results" class="no-results" style="display: none;">
                  <p class="no-results-text">No results found for roll number <span id="student-search-term"></span>.</p>
                  <p class="retry-text">Please check the roll number and try again.</p>
                </div>
              </div>
              
              <div class="tab-content" id="faculty-tab">
                <div class="section-info">
                  <h2 class="section-title">Faculty Section</h2>
                  <p class="section-desc">Dear Faculty, enter your course code to view the exam schedule for your course.</p>
                </div>
                
                <form id="faculty-form" class="search-form">
                  <div class="input-container">
                    <input type="text" id="faculty-input" class="search-input" placeholder="Enter Course Code (e.g., CS2207)" />
                  </div>
                  <button type="submit" class="search-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="search-icon">
                      <circle cx="11" cy="11" r="8"></circle>
                      <path d="m21 21-4.3-4.3"></path>
                    </svg>
                    <span>Search</span>
                  </button>
                </form>
                
                <div id="faculty-results" class="results-container" style="display: none;">
                  <div class="results-header">
                    <h3 class="results-title">Course Exam Schedule</h3>
                    <button id="faculty-download" class="download-button">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="download-icon">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="7 10 12 15 17 10"></polyline>
                        <line x1="12" y1="15" x2="12" y2="3"></line>
                      </svg>
                      <span><strong>Verify with Excel:</strong> Download file</span>
                    </button>
                  </div>
                  <div class="table-container">
                    <table class="results-table">
                      <!-- <caption>Exam schedule</caption> -->
                      <thead>
                        <tr>
                          <th>Course Code</th>
                          <th>Day</th>
                          <th>Shift</th>
                          <th>Date</th>
                          <th>Room Nos</th>
                          <th>Course Name</th>
                        </tr>
                      </thead>
                      <tbody id="faculty-table-body">
                        <!-- Results will be inserted here by JavaScript -->
                      </tbody>
                    </table>
                  </div>
                </div>
                
                <div id="faculty-no-results" class="no-results" style="display: none;">
                  <p class="no-results-text">No results found for course code <span id="faculty-search-term"></span>.</p>
                  <p class="retry-text">Please check the course code and try again.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <footer class="footer">
        <p>Please verify the exam schedule with the provided <a href="{{excel_file_url}}">Excel file</a>. If you have any issues, contact the administration.</p>
      </footer>   
    </main>
    
    <div id="toast" class="toast">
      <div class="toast-content">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="toast-icon">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="toast-icon-error">
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
        <span id="toast-message">Excel file downloaded successfully</span>
      </div>
    </div>
    
    <div id="loading" class="loading-overlay">
      <div class="spinner"></div>
    </div>
    
    <script src="/static/script.js"></script>
    <script>
      const studentDownload = document.getElementById('student-download');
      const facultyDownload = document.getElementById('faculty-download');
      // Download Buttons
      studentDownload.addEventListener('click', () => {
          window.open(`{{excel_file_url}}`, '_blank');
          showToast('Excel file downloaded successfully');
      });

      facultyDownload.addEventListener('click', () => {
          window.open(`{{excel_file_url}}`, '_blank');
          showToast('Excel file downloaded successfully');
      });

    </script>
  </body>
</html>
